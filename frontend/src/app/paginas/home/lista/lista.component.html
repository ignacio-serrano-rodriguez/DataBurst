<div *ngIf="!mostrarAgregadorComponent">
  <button mat-icon-button (click)="volver()">
    <mat-icon>arrow_back</mat-icon>
  </button>

  <h2>Detalles de la Lista</h2>
  <div *ngIf="lista">
    <p *ngIf="!editandoNombre">Nombre: {{ lista.nombre }} <button mat-icon-button (click)="editarNombre()"><mat-icon>edit</mat-icon></button></p>
    <div *ngIf="editandoNombre">
      <input [(ngModel)]="nuevoNombreLista" placeholder="Nuevo nombre de la lista">
      <button mat-button color="primary" (click)="guardarNombre()">Guardar</button>
      <button mat-button color="warn" (click)="cancelarEdicion()">Cancelar</button>
    </div>
    <p>Visibilidad: {{ lista.publica ? 'PÃºblica' : 'Privada' }} <button mat-icon-button (click)="cambiarVisibilidad()"><mat-icon>swap_horiz</mat-icon></button></p>
  </div>

  <h3>Elementos Asignados</h3>
  <ul>
    <li *ngFor="let elemento of elementos">
      {{ elemento.nombre }}
      <button mat-icon-button (click)="likeElemento(elemento.id)">
        <mat-icon>thumb_up</mat-icon>
      </button>
      <button mat-icon-button (click)="dislikeElemento(elemento.id)">
        <mat-icon>thumb_down</mat-icon>
      </button>
      <button mat-icon-button (click)="comentarElemento(elemento.id)">
        <mat-icon>comment</mat-icon>
      </button>
      <button mat-icon-button (click)="informacionElemento(elemento.id)">
        <mat-icon>info</mat-icon>
      </button>
      <button mat-icon-button (click)="eliminarElemento(elemento.id)">
        <mat-icon>delete</mat-icon>
      </button>
    </li>
  </ul>

  <button mat-flat-button color="primary" (click)="mostrarAgregador()">
    Agregador de Elementos
  </button>

  <button mat-flat-button color="warn" (click)="eliminarLista()">
    Eliminar Lista
  </button>

  <button mat-flat-button color="primary" (click)="mostrarColaborar()">
    Colaborar
  </button>

  <div *ngIf="mostrarColaborarComponent">
    <h3>Invitar Amigos</h3>
    <mat-form-field class="elementoFormulario">
      <mat-label class="etiquetaFormulario">Buscar Amigos</mat-label>
      <input matInput id="nombreAmigoBuscar" [(ngModel)]="nombreAmigoBuscar" (input)="onNombreAmigoBuscarChange()">
    </mat-form-field>

    <ul *ngIf="amigosEncontrados.length > 0">
      <li *ngFor="let amigo of amigosEncontrados">
        {{ amigo.nombre }}
        <button mat-button color="primary" (click)="invitarAmigo(amigo.id)">
          Invitar
        </button>
      </li>
    </ul>

    <div *ngIf="noSeEncontraronAmigos">
      <p>No se encontraron amigos.</p>
    </div>

    <h3>Colaboradores</h3>
    <ul *ngIf="colaboradores.length > 0">
      <li *ngFor="let colaborador of colaboradores">
        {{ colaborador.nombre }}
      </li>
    </ul>

    <div *ngIf="colaboradores.length === 0">
      <p>No hay colaboradores en esta lista.</p>
    </div>

    <button mat-flat-button color="warn" (click)="ocultarColaborar()">
      Cancelar
    </button>
  </div>
</div>

<div *ngIf="mostrarAgregadorComponent">
  <app-agregador 
    [nombreLista]="lista?.nombre" 
    [listaId]="lista?.id" 
    (volverALista)="ocultarAgregador()">
  </app-agregador>
</div>